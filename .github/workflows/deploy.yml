name: Engine3D Package Deployment

jobs:
  deploy:
    runs-on: ubuntu-22.04
    steps:
      - name: ðŸ“¡ Sign into JFrog Artifactory
        if: ${{ inputs.version != '' }}
        env:
          PASSWORD: ${{ secrets.JFROG_ENGINE3D_TRUNKEN_ID_TOKEN }}
          JFROG_USER: ${{ secrets.JFROG_USERNAME }}
        run: conan remote login -p $PASSWORD engine3d-dev $JFROG_USER

      - name: ðŸ†™ Upload package version ${{ inputs.version }} to `engine3d` repo
        if: ${{ inputs.version != '' }}
        run: conan upload "${{ inputs.library }}/${{ inputs.version }}" --confirm -r=engine3d-dev
